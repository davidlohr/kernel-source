From: Chad Dupuis <cdupuis@marvell.com>
Date: Sun, 21 Apr 2019 22:44:52 -0700
Subject: scsi: qedf: Print scsi_cmd backpointer in good completion path if the
 command is still being used
Git-commit: 276eb3e5d0a76571e95ed54abebc53c275e300d0
Patch-mainline: v5.2-rc1
References: bsc#1136467 jsc#SLE-4694

Printing scsi command pointer will help in crash dump analysis.

Signed-off-by: Chad Dupuis <cdupuis@marvell.com>
Signed-off-by: Saurav Kashyap <skashyap@marvell.com>
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Acked-by: Lee Duncan <lduncan@suse.com>
---
 drivers/scsi/qedf/qedf_io.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

--- a/drivers/scsi/qedf/qedf_io.c
+++ b/drivers/scsi/qedf/qedf_io.c
@@ -1907,9 +1907,9 @@ int qedf_initiate_abts(struct qedf_ioreq
 	if (!test_bit(QEDF_CMD_OUTSTANDING, &io_req->flags) ||
 	    test_bit(QEDF_CMD_IN_CLEANUP, &io_req->flags) ||
 	    test_bit(QEDF_CMD_IN_ABORT, &io_req->flags)) {
-		QEDF_ERR(&(qedf->dbg_ctx), "io_req xid=0x%x already in "
-			  "cleanup or abort processing or already "
-			  "completed.\n", io_req->xid);
+		QEDF_ERR(&qedf->dbg_ctx,
+				"io_req xid=0x%x sc_cmd=%p already in cleanup or abort processing or already completed.\n",
+				io_req->xid, io_req->sc_cmd);
 		rc = 1;
 		goto drop_rdata_kref;
 	}
